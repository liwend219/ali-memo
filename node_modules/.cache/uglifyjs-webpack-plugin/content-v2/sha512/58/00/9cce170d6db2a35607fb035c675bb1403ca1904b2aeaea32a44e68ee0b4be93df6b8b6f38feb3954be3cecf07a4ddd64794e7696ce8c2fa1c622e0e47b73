{"code":"!function(a){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=a,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"/\",i(i.s=16)}([function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return n});function n(t,e){var a={};for(var n in t)/data-/gi.test(n)&&(a[n.replace(/data-/gi,\"\")]=t[n]);return Object.assign({},e,{currentTarget:{dataset:a},target:{dataset:a,targetDataset:a}})}},function(t,e,a){t.exports=!a(7)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n,i=a(15),o=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,e,a){my.request({url:o.default.roots+t,method:\"POST\",header:{\"Content-Type\":\"application/x-www-form-urlencoded\"},data:e,dataType:\"json\",fail:function(t){},complete:function(t){t&&200==t.status?a(t.data):a(null)}})},t.exports=e.default},function(t,e,a){\"use strict\";e.__esModule=!0;var n,i=a(32),o=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,e,a){return e in t?(0,o.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},function(t,e){var a=t.exports={version:\"2.6.9\"};\"number\"==typeof __e&&(__e=a)},function(t,e){var a=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=a)},function(t,e){t.exports=function(t){return\"object\"===typeof t?null!==t:\"function\"===typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,a){var h=a(5),g=a(4),v=a(35),y=a(37),b=a(10),_=\"prototype\",C=function(t,e,a){var n,i,o,r=t&C.F,s=t&C.G,u=t&C.S,l=t&C.P,c=t&C.B,d=t&C.W,f=s?g:g[e]||(g[e]={}),p=f[_],m=s?h:u?h[e]:(h[e]||{})[_];for(n in s&&(a=e),a)(i=!r&&m&&void 0!==m[n])&&b(f,n)||(o=i?m[n]:a[n],f[n]=s&&\"function\"!=typeof m[n]?a[n]:c&&i?v(o,h):d&&m[n]==o?function(n){function t(t,e,a){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,a)}return n.apply(this,arguments)}return t[_]=n[_],t}(o):l&&\"function\"==typeof o?v(Function.call,o):o,l&&((f.virtual||(f.virtual={}))[n]=o,t&C.R&&p&&!p[n]&&y(p,n,o)))};C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128,t.exports=C},function(t,e,a){var n=a(38),i=a(39),o=a(41),r=Object.defineProperty;e.f=a(1)?Object.defineProperty:function(t,e,a){if(n(t),e=o(e,!0),n(a),i)try{return r(t,e,a)}catch(t){}if(\"get\"in a||\"set\"in a)throw TypeError(\"Accessors not supported!\");return\"value\"in a&&(t[e]=a.value),t}},function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},function(t,e,a){var n=a(12),i=a(13);t.exports=function(t){return n(i(t))}},function(t,e,a){var n=a(50);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==n(t)?t.split(\"\"):Object(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e){var a=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:a)(t)}},function(t,e,a){\"use strict\";e.roots=\"https://www.liwend.cn/\"},function(t,e,a){t.exports=a(17)},function(module,exports,__webpack_require__){\"use strict\";\n/*BUGME_START*/var __BUGME_START__=1;!function(){var CircularJSON=JSON,originalAddEventListener=self.addEventListener,replacer=function(t,e){return void 0===e?\"\\xa9undefined\":null===e?\"\\xa9null\":e===-1/0?\"\\xa9- Infinity\":e===1/0?\"\\xa9Infinity\":\"number\"==typeof e&&isNaN(e)?\"\\xa9NaN\":\"function\"==typeof e?\"\\xa9function\":e};try{CircularJSON=eval('(function(JSON,RegExp){var specialChar=\"~\",safeSpecialChar=\"\\\\\\\\x\"+(\"0\"+specialChar.charCodeAt(0).toString(16)).slice(-2),escapedSafeSpecialChar=\"\\\\\\\\\"+safeSpecialChar,specialCharRG=new RegExp(safeSpecialChar,\"g\"),safeSpecialCharRG=new RegExp(escapedSafeSpecialChar,\"g\"),safeStartWithSpecialCharRG=new RegExp(\"(?:^|([^\\\\\\\\\\\\\\\\]))\"+escapedSafeSpecialChar),indexOf=[].indexOf||function(v){for(var i=this.length;i--&&this[i]!==v;);return i},$String=String;function generateReplacer(value,replacer,resolve){var doNotIgnore=false,inspect=!!replacer,path=[],all=[value],seen=[value],mapp=[resolve?specialChar:\"[Circular]\"],last=value,lvl=1,i,fn;if(inspect){fn=typeof replacer===\"object\"?function(key,value){return key!==\"\"&&replacer.indexOf(key)<0?void 0:value}:replacer}return function(key,value){if(inspect)value=fn.call(this,key,value);if(doNotIgnore){if(last!==this){i=lvl-indexOf.call(all,this)-1;lvl-=i;all.splice(lvl,all.length);path.splice(lvl-1,path.length);last=this}if(typeof value===\"object\"&&value){if(indexOf.call(all,value)<0){all.push(last=value)}lvl=all.length;i=indexOf.call(seen,value);if(i<0){i=seen.push(value)-1;if(resolve){path.push((\"\"+key).replace(specialCharRG,safeSpecialChar));mapp[i]=specialChar+path.join(specialChar)}else{mapp[i]=mapp[0]}}else{value=mapp[i]}}else{if(typeof value===\"string\"&&resolve){value=value.replace(safeSpecialChar,escapedSafeSpecialChar).replace(specialChar,safeSpecialChar)}}}else{doNotIgnore=true}return value}}function retrieveFromPath(current,keys){for(var i=0,length=keys.length;i<length;current=current[keys[i++].replace(safeSpecialCharRG,specialChar)]);return current}function generateReviver(reviver){return function(key,value){var isString=typeof value===\"string\";if(isString&&value.charAt(0)===specialChar){return new $String(value.slice(1))}if(key===\"\")value=regenerate(value,value,{});if(isString)value=value.replace(safeStartWithSpecialCharRG,\"$1\"+specialChar).replace(escapedSafeSpecialChar,safeSpecialChar);return reviver?reviver.call(this,key,value):value}}function regenerateArray(root,current,retrieve){for(var i=0,length=current.length;i<length;i++){current[i]=regenerate(root,current[i],retrieve)}return current}function regenerateObject(root,current,retrieve){for(var key in current){if(current.hasOwnProperty(key)){current[key]=regenerate(root,current[key],retrieve)}}return current}function regenerate(root,current,retrieve){return current instanceof Array?regenerateArray(root,current,retrieve):current instanceof $String?current.length?retrieve.hasOwnProperty(current)?retrieve[current]:retrieve[current]=retrieveFromPath(root,current.split(specialChar)):root:current instanceof Object?regenerateObject(root,current,retrieve):current}var CircularJSON={stringify:function stringify(value,replacer,space,doNotResolve){return CircularJSON.parser.stringify(value,generateReplacer(value,replacer,!doNotResolve),space)},parse:function parse(text,reviver){return CircularJSON.parser.parse(text,generateReviver(reviver))},parser:JSON};return CircularJSON})(JSON,RegExp)')}catch(t){console.error(t)}var OriginalFunction=Function,OriginalFetch=self.fetch,OriginalBridgeCall=self.AlipayJSBridge&&self.AlipayJSBridge.call,callInternalAPI=function(t,e){var a={data:{method:t,param:e},action:\"internalAPI\"},n=encodeURIComponent(JSON.stringify(a));OriginalFetch?OriginalFetch(\"https://alipay.kylinBridge/?data=\"+n,{mode:\"no-cors\"}).then(function(){}).catch(function(){}):OriginalBridgeCall(\"internalAPI\",{method:t,param:e})},eventHandler=function(t){try{if(t.fromVConsoleToWorker){var e=t.requestId;if(\"exec\"===t.method){try{new OriginalFunction(\"requestId\",\"sendBack\",\"\\n              var res = \"+t.script+\";\\n              console.log(res);\\n            \")(e,function(t){return callInternalAPI(\"tinyDebugConsole\",{type:\"msgFromWorkerToVConsole\",content:CircularJSON.stringify({requestId:e,returnValue:t},replacer)})})}catch(t){console.error(t.name+\":\"+t.message)}}}}catch(t){}};setTimeout(function(){self.document&&self.document.addEventListener(\"push\",function(t){try{eventHandler(JSON.parse(t.data.param.content))}catch(t){}}),originalAddEventListener&&originalAddEventListener(\"push\",function(t){try{var e=JSON.parse(JSON.parse(t.data.text()).param.data.content);eventHandler(e)}catch(t){}})},10),[\"log\",\"info\",\"error\",\"debug\",\"warn\"].forEach(function(o){var r=\"o\"+o;console[r]||(console[r]=console[o],console[o]=function(){for(var t,e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];var i=void 0;(t=console)[r].apply(t,a);try{i=CircularJSON.stringify(a.map(function(t){return t instanceof Error?t.name+\": \"+t.message:t}),replacer)}catch(t){return void console.error(t.name+\": \"+t.message)}callInternalAPI(\"tinyDebugConsole\",{content:i,type:\"console_\"+o})})})}();var __BUGME_END__=1;\n/*BUGME_END*/if(!self.__appxInited){var success=function(){__webpack_require__(18),__webpack_require__(19),__webpack_require__(20),__webpack_require__(21),__webpack_require__(22),__webpack_require__(23),__webpack_require__(24),__webpack_require__(25),__webpack_require__(26),__webpack_require__(27),__webpack_require__(28),__webpack_require__(29),__webpack_require__(30),__webpack_require__(31),__webpack_require__(63),__webpack_require__(64),__webpack_require__(65),__webpack_require__(66)};self.__appxInited=1,__webpack_require__(67),__webpack_require__(68);var AFAppX=self.AFAppX;self.getCurrentPages=AFAppX.getCurrentPages,self.getApp=AFAppX.getApp,self.Page=AFAppX.Page,self.App=AFAppX.App,self.my=AFAppX.bridge||AFAppX.abridge,self.abridge=self.my,self.Component=AFAppX.WorkerComponent||function(){},self.$global=AFAppX.$global,self.bootstrapApp?self.bootstrapApp({success:success}):success()}},function(t,e,a){\"use strict\";App({onLaunch:function(t){},onShow:function(t){}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/badge/index\",usingComponents:{}},Component({props:{className:\"\",overflowCount:99,text:\"\",dot:!1}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/tabs/index\",usingComponents:{badge:\"/node_modules/mini-antui/es/badge/index\"}};var a=my.getSystemInfoSync().windowWidth;Component({props:{className:\"\",activeCls:\"\",tabBarUnderlineColor:\"#108ee9\",tabBarActiveTextColor:\"#108ee9\",tabBarInactiveTextColor:\"#333333\",tabBarBackgroundColor:\"#ffffff\",showPlus:!1,swipeable:!0,activeTab:0,animation:!0,tabBarCls:\"\",duration:500},data:{windowWidth:a,tabWidth:.25,autoplay:!1,animation:!1,version:my.SDKVersion},didMount:function(){var t=this.props,e=t.tabs,a=t.animation;this.setData({tabWidth:e.length>3?.25:1/e.length,animation:a,autoplay:!0})},didUpdate:function(t){var e=this.props.tabs;t.tabs.length!==e.length&&this.setData({tabWidth:e.length>3?.25:1/e.length})},methods:{handleSwiperChange:function(t){var e=t.detail.current;this.props.onChange&&this.props.onChange({index:e})},handleTabClick:function(t){var e=t.target.dataset.index;this.props.onTabClick&&this.props.onTabClick({index:e})},handlePlusClick:function(){this.props.onPlusClick&&this.props.onPlusClick()}}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/tabs/tab-content/index\",usingComponents:{}},Component({})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/modal/index\",usingComponents:{}},Component({props:{className:\"\",topImageSize:\"md\",showClose:!0,closeType:\"0\"},methods:{onModalClick:function(){var t=this.props.onModalClick;t&&t()},onModalClose:function(){var t=this.props.onModalClose;t&&t()}}})},function(t,e,a){\"use strict\";a.r(e);var n=a(0);$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/am-checkbox/index\",usingComponents:{}},Component({props:{value:\"\",checked:!1,disabled:!1,onChange:function(){},id:\"\"},methods:{onChange:function(t){var e=Object(n.a)(this.props,t);this.props.onChange(e)}}})},function(t,e,a){\"use strict\";$global.currentComponentConfig={is:\"/components/count-down/index\",usingComponents:{}},Component({props:{target:Number,showDay:Boolean,callback:String,format:Array,clearTimer:Boolean},externalClasses:[\"countdown-class\"],data:{time:\"\",statusTxt:\"\",resultFormat:[],changeFormat:!1},didMount:function(){this.getFormat()},didUnmount:function(){},methods:{getFormat:function(){var t=this.props,e=t.format.length;if(t.showDay||this.data.resultFormat.push(\"\"),e>=3){for(var a=0;a<e&&!(this.data.resultFormat.length>=4);a++)t.format[a]&&this.data.resultFormat.push(t.format[a].toString());this.data.resultFormat.length>=4&&(this.data.changeFormat=!0)}this.getLastTime()},init:function(){var t=this;setTimeout(function(){t.getLastTime.call(t)},1e3)},getLastTime:function(){var t=this.props,e=Math.ceil((t.target-(new Date).getTime())/1e3),a=\"\",n=\"00:00:00\",i=\"00\",o=this.data.resultFormat;if(e>0){i=this.formatNum(parseInt(e/86400));var r=e%86400,s=this.formatNum(parseInt(r/3600));r%=3600;var u=this.formatNum(parseInt(r/60)),l=this.formatNum(r%60);n=this.data.changeFormat?\"\"+s+o[1]+u+o[2]+l+o[3]:s+\":\"+u+\":\"+l,t.clearTimer||this.init.call(this),this.setData({statusTxt:\"\\u8fd8\\u6709\"})}else{var c=e-2*e;i=this.formatNum(parseInt(c/86400));var d=c%86400,f=this.formatNum(parseInt(d/3600));d%=3600;var p=this.formatNum(parseInt(d/60)),m=this.formatNum(d%60);n=this.data.changeFormat?\"\"+f+o[1]+p+o[2]+m+o[3]:f+\":\"+p+\":\"+m,t.clearTimer||this.init.call(this),this.setData({statusTxt:\"\\u5df2\\u8fc7\"})}a=t.showDay?this.data.changeFormat?\"\"+i+o[0]+\" \"+n:i+\"\\u5929 \"+n:n,this.setData({time:a})},formatNum:function(t){return t>9?t:\"0\"+t},endfn:function(){}}})},function(t,e,a){\"use strict\";a.r(e);var n=a(0);$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/input-item/index\",usingComponents:{}},Component({props:{className:\"\",labelCls:\"\",inputCls:\"\",last:!1,value:\"\",name:\"\",type:\"text\",password:!1,placeholder:\"\",placeholderClass:\"\",placeholderStyle:\"\",disabled:!1,maxlength:140,focus:!1,clear:!1,syncInput:!1,enableNative:!1,onInput:function(){},onConfirm:function(){},onFocus:function(){},onBlur:function(){},onClear:function(){}},data:{_focus:!1},didMount:function(){this.setData({_focus:this.props.focus})},methods:{onBlur:function(t){this.setData({_focus:!1});var e=Object(n.a)(this.props,t);this.props.onBlur(e)},onConfirm:function(t){var e=Object(n.a)(this.props,t);this.props.onConfirm(e)},onFocus:function(t){this.setData({_focus:!0});var e=Object(n.a)(this.props,t);this.props.onFocus(e)},onInput:function(t){var e=Object(n.a)(this.props,t);this.props.onInput(e)},onClear:function(t){var e=Object(n.a)(this.props,t);this.props.onClear(e)}}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/list/index\",usingComponents:{}},Component({props:{className:\"\"}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/list/list-item/index\",usingComponents:{}},Component({props:{className:\"\",align:!1,disabled:!1,multipleLine:!1,wrap:!1},didMount:function(){this._updateDataSet()},didUpdate:function(){this._updateDataSet()},methods:{_updateDataSet:function(){for(var t in this.dataset={},this.props)/data-/gi.test(t)&&(this.dataset[t.replace(/data-/gi,\"\")]=this.props[t])},onItemTap:function(t){var e=this.props,a=e.onClick,n=e.disabled;a&&!n&&a({index:t.target.dataset.index,target:{dataset:this.dataset}})}}})},function(t,e,a){\"use strict\";a.r(e);var n=a(0);$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/picker-item/index\",usingComponents:{}},Component({props:{className:\"\",value:\"\",placeholder:\"\",onSelect:function(){},labelCls:\"\",pickerCls:\"\"},methods:{onPickerTap:function(t){var e=Object(n.a)(this.props,t);this.props.onPickerTap(e)}}})},function(t,e){$global.currentComponentConfig={is:\"/node_modules/mini-antui/es/notice/index\",usingComponents:{}};function o(){}var a=my.canIUse(\"view.onTransitionEnd\");Component({props:{className:\"\",mode:\"\",action:\"\",show:!0,enableMarquee:!1,onClick:function(){},marqueeProps:{loop:!1,leading:500,trailing:800,fps:40}},data:{animatedWidth:0,overflowWidth:0,duration:0,marqueeStyle:\"\",canIUseTransitionEnd:a},didMount:function(){this.props.enableMarquee&&(a?this._measureText(this.startMarquee.bind(this)):(this._measureText(),this._startAnimation()))},didUpdate:function(){a||this._measureText(),!this.props.enableMarquee||this._marqueeTimer||a||(this._measureText(),this._startAnimation())},didUnmount:function(){this._marqueeTimer&&(clearTimeout(this._marqueeTimer),this._marqueeTimer=null)},methods:{resetMarquee:function(){this.setData({marqueeStyle:\"transform: translateX(0px); transition: 0s all linear;\"})},startMarquee:function(){var t=this.props.marqueeProps.leading,e=void 0===t?500:t,a=this.data,n=a.duration,i=\"transform: translateX(\"+-a.overflowWidth+\"px); transition: \"+n+\"s all linear \"+(\"number\"===typeof e?e/1e3+\"s\":\"0s\")+\";\";this.setData({marqueeStyle:i})},onTransitionEnd:function(){var t=this,e=this.props.marqueeProps,a=e.loop,n=void 0!==a&&a,i=e.trailing,o=void 0===i?800:i;n&&setTimeout(function(){t.resetMarquee(),t._measureText(t.startMarquee.bind(t))},\"number\"===typeof o?o:0)},_measureText:function(a){var n=this;void 0===a&&(a=o);var t=this.props.marqueeProps.fps,i=void 0===t?40:t;my.createSelectorQuery().select(\".am-notice-marquee-\"+this.$id).boundingClientRect().select(\".am-notice-content-\"+this.$id).boundingClientRect().exec(function(t){var e=t&&t[0]&&t[1]&&t[0].width-t[1].width||0;e>0&&(n.setData({overflowWidth:e,duration:e/i}),a())})},_startAnimation:function(){var i=this;this._marqueeTimer&&clearTimeout(this._marqueeTimer);var t=this.props.marqueeProps,e=t.loop,o=void 0!==e&&e,a=t.leading,n=void 0===a?500:a,r=t.trailing,s=void 0===r?800:r,u=t.fps,l=1/(void 0===u?40:u)*1e3,c=0===this.data.animatedWidth?n:l;0!==this.data.overflowWidth&&(this._marqueeTimer=setTimeout(function t(){var e=i.data.overflowWidth,a=i.data.animatedWidth+1,n=a>e;if(n){if(!o)return;a=0}n&&s?i._marqueeTimer=setTimeout(function(){i.setData({animatedWidth:a}),i._marqueeTimer=setTimeout(t,l)},s):(i.setData({animatedWidth:a}),i._marqueeTimer=setTimeout(t,l))},c))},onNoticeTap:function(){var t=this.props,e=t.mode,a=t.onClick;\"link\"===e&&\"function\"===typeof a&&a()},onOperationTap:function(){var t=this.props,e=t.mode,a=t.onClick;\"closable\"===e&&\"function\"===typeof a&&a()}}})},function(t,e,a){\"use strict\";$global.currentPageConfig={pagePath:\"pages/test/test\",usingComponents:{},tabIndex:14},Page({data:{ctx:\"\"},onReady:function(){var e=this;this.data.ctx=my.createCanvasContext(\"canvas\"),this.data.ctx.setFillStyle(\"#fff\"),this.data.ctx.drawImage(\"../../images/bg.jpg\",2,2,280,300),this.data.ctx.font=\"italic bold 12px \\u5b8b\\u4f53\";var t=\"\\u4e0d\\u8fc7\\u662f\\u5927\\u68a6\\u521d\\u9192\\u4e00\\u573a\\u7a7a\\uff0c\\u4e0d\\u8fc7\\u662f\\u4f60\\u597d\\u554a\\uff0c\\u6211\\u53bb,\\u771f\\u7279\\u4e48\\u523a\\u6fc0 \\u54c8\\u54c8\\u54c8\\u54c8\\n\\u9192\\u6765\\u5c31\\u8fd9\\uff0c\\u55ef\".split(/[,\\uff0c \\n]/);console.log(t);var a=50;t.forEach(function(t){e.data.ctx.fillText(t,50,a),a+=20}),this.data.ctx.fillText(\"--LWD\",180,280),this.data.ctx.draw()},saveImg:function(){this.data.ctx.toTempFilePath({success:function(t){console.log(t),my.saveImage({url:t.apFilePath,showActionSheet:!0,success:function(){my.alert({title:\"\\u4fdd\\u5b58\\u6210\\u529f\"})}})}})}})},function(t,e,a){\"use strict\";var i=n(a(3)),o=n(a(43)),r=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}$global.currentPageConfig={pagePath:\"pages/index/index\",usingComponents:{tabs:\"/node_modules/mini-antui/es/tabs/index\",\"tab-content\":\"/node_modules/mini-antui/es/tabs/tab-content/index\",modal:\"/node_modules/mini-antui/es/modal/index\",\"am-checkbox\":\"/node_modules/mini-antui/es/am-checkbox/index\",\"count-down\":\"/components/count-down/index\",\"input-item\":\"/node_modules/mini-antui/es/input-item/index\"},tabIndex:10};var s=a(62);Page({data:{info:{txt:\"\"},tmpData:{},diaryArr:[],memoArr:[],deleteHole:!1,timeArr:[],showComment:!1,diaryItem:\"\",isShowTail:!1,versionInfo:{},showNotice:!1,isDelete:!1,deleteItem:{},showLoading:!1,myFormat1:[\"\\u5929\",\"\\u65f6\",\"\\u5206\",\"\\u79d2\"],memoCount:0,holeDType:1,holeList:[],show:!1,stateList:[\"../../images/cool.png\",\"../../images/flushed.png\",\"../../images/sad.png\",\"../../images/angry.png\"],isClear:!1,tabs:[{title:\"\\u65e5\\u8bb0\"},{title:\"\\u6811\\u6d1e\"}],activeTab:0,userId:\"\",nickName:\"\",avatar:\"\",showHB:!1,ctx:\"\",bgImgUrl:\"\"},onLoad:function(t){var n=this;t&&t.activeTab&&this.setData({activeTab:t.activeTab}),my.getStorage({key:\"userInfo\",success:function(t){t.data?(n.setData({userId:t.data.userId,nickName:t.data.nickName,avatar:t.data.avatar}),n.getDiary(t.data.userId),n.getHole(t.data.userId)):my.getAuthCode({scopes:\"auth_user\",success:function(a){my.getAuthUserInfo({success:function(t){var e={authCode:a.authCode,avatar:t.avatar,nickName:t.nickName};n.linkLogin(e)}})}})}})},onReady:function(t){},onShow:function(){},onHide:function(){},onUnload:function(){},onTitleClick:function(){},onPullDownRefresh:function(){0==this.data.activeTab?this.getDiary(this.data.userId):this.getHole(this.data.userId)},onReachBottom:function(){},onShareAppMessage:function(){return{title:\"\\u53ee\\u549a\\u5fc3\\u60c5\\u65e5\\u8bb0\",desc:\"\\u4e00\\u6b3e\\u8bb0\\u5f55\\u4f60\\u5fc3\\u60c5\\u548c\\u5199\\u65e5\\u8bb0\\u7684\\u552f\\u7f8e\\u5c0f\\u7a0b\\u5e8f\",path:\"pages/index/index\",bgImgUrl:this.data.bgImgUrl}},share:function(t){var e=this;console.log(t.target.dataset),this.data.ctx=my.createCanvasContext(\"canvas\"),this.data.ctx.setFillStyle(\"#fff\");var a=this;this.data.ctx.drawImage(\"../../images/bg.jpg\",2,2,280,300),this.data.ctx.font=\"italic bold 12px \\u5b8b\\u4f53\";var n=t.target.dataset.item.content.split(/[,\\uff0c \\n]/);console.log(n);var i=50;n.forEach(function(t){e.data.ctx.fillText(t,50,i),i+=20}),this.data.ctx.fillText(t.target.dataset.item.nickName,180,280),this.data.ctx.draw(),console.log(this.data.ctx),this.data.ctx.toTempFilePath({success:function(t){console.log(t.apFilePath),a.setData({bgImgUrl:t.apFilePath})}})},handleTabClick:function(t){var e=t.index;this.setData({activeTab:e})},handleTabChange:function(t){var e=t.index;this.setData({activeTab:e})},handlePlusClick:function(){my.alert({content:\"plus clicked\"})},linkLogin:function(a){var n=this;(0,r.default)(\"saveOpenID\",a,function(t){if(t&&1==t.sta){var e=(0,o.default)({},a,t.data);my.setStorage({key:\"userInfo\",data:e,success:function(){}}),n.setData({userId:t.data.userId}),n.getDiary(t.data.userId),n.getHole(t.data.userId)}})},getDiary:function(t){var e=this;(0,r.default)(\"getDiary\",{userId:t},function(t){my.stopPullDownRefresh(),1==t.sta&&e.setData({diaryArr:t.data.diary.reverse(),memoArr:t.data.memo.reverse(),timeArr:t.data.time.reverse(),show:t.show})})},getNotice:function(){var a=this;(0,r.default)(\"notice\",{},function(e){a.setData({versionInfo:e.data}),e&&e.sta&&my.getStorage({key:\"version\",success:function(t){t.data?t.data.key!=e.data.key&&a.setData({showNotice:!0}):a.setData({showNotice:!0})}})})},closeNotice:function(){var e=this;my.setStorage({key:\"version\",data:this.data.versionInfo,success:function(t){e.setData({showNotice:!1})}})},newDiary:function(){var t=void 0;t=0==this.data.activeTab?0:4,my.navigateTo({url:\"../diary/diary?idx=\"+t})},deletes:function(t){var e=t.currentTarget.dataset.item;e.userId=this.data.userId,e.types=this.data.activeTab,0==this.data.activeTab&&(e.types=\"diary\"),this.setData({isDelete:!0,deleteItem:e})},onModalClick:function(){var e=this;this.data.timeArr.forEach(function(t){t._id==e.data.deleteItem._id&&(t.isClear=!0)}),this.setData({showLoading:!0,isDelete:!1,timeArr:this.data.timeArr}),(0,r.default)(\"deleteDiary\",this.data.deleteItem,function(t){1==t.sta?(e.setData({isDelete:!1,showLoading:!1}),my.showToast({type:\"success\",content:\"\\u5220\\u9664\\u6210\\u529f\",duration:2e3})):my.showToast({type:\"error\",content:\"\\u5220\\u9664\\u5931\\u8d25\",duration:2e3}),getCurrentPages()[getCurrentPages().length-1].onLoad()})},onModalClose:function(){this.setData({isDelete:!1})},onDetailClose:function(){this.setData({isShowTail:!1})},modify:function(t){this.data.activeTab;my.navigateTo({url:\"../diary/diary?idx=0&data=\"+JSON.stringify(t.currentTarget.dataset.item)})},showTail:function(t){this.setData({diaryItem:t.currentTarget.dataset.item,isShowTail:!0})},getHole:function(t){var e=this;(0,r.default)(\"getHole\",{userId:t},function(t){my.stopPullDownRefresh(),1==t.sta&&(t.data.forEach(function(t){t.time=s.fromDate(t.timer)}),e.setData({holeList:t.data}))})},onModalHoleClick:function(){var e=this;if(this.setData({showLoading:!0}),this.setData((0,i.default)({},\"tmpData.txt\",this.data.info.txt)),!this.data.info.txt)return my.showToast({content:\"\\u8bc4\\u8bba\\u4e0d\\u53ef\\u4e3a\\u7a7a\",duration:2e3}),void this.setData({showLoading:!1});(0,r.default)(\"publish/comment\",this.data.tmpData,function(t){1==t.sta&&(e.setData((0,i.default)({showLoading:!1,showComment:!1},\"info.txt\",\"\")),e.getHole(e.data.userId))})},onModalHoleClose:function(){this.setData({showComment:!1})},onInputTitle:function(t){this.setData((0,i.default)({},\"info.txt\",t.detail.value))},star:function(t){var e=this,a=t.target.dataset.item;(0,r.default)(\"star\",{userId:this.data.userId,pid:a.pid},function(t){1==t.sta?e.getHole(e.data.userId):my.showToast({type:\"error\",content:t.msg,duration:2e3})})},onClear:function(){this.setData((0,i.default)({},\"info.txt\",\"\"))},newHole:function(){my.navigateTo({url:\"../diary/diary?idx=4\"})},showCommentBox:function(t){var e=t.target.dataset.item,a={userId:this.data.userId,nickName:this.data.nickName,avatar:this.data.avatar,pid:e.pid,txt:this.data.info.txt};this.setData({showComment:!0,tmpData:a})},deleteHoleClick:function(){var n=this;if(this.data.info.txt){var t={_id:this.data.deleteItem._id,pid:this.data.deleteItem.pid,key:this.data.info.txt,userId:this.data.userId,nickName:this.data.nickName};1==this.data.holeDType?(0,r.default)(\"deleteHole\",t,function(t){var e,a;1==t.sta?(n.setData((e={deleteHole:!1},(0,i.default)(e,\"info.txt\",\"\"),(0,i.default)(e,\"showLoading\",!1),e)),my.showToast({type:\"success\",content:\"\\u5220\\u9664\\u6210\\u529f\",duration:2e3})):(n.setData((a={deleteHole:!1},(0,i.default)(a,\"info.txt\",\"\"),(0,i.default)(a,\"showLoading\",!1),a)),my.showToast({type:\"error\",content:t.msg,duration:2e3}));getCurrentPages()[getCurrentPages().length-1].onLoad()}):(0,r.default)(\"deleteComment\",t,function(t){var e,a;1==t.sta?(n.setData((e={deleteHole:!1},(0,i.default)(e,\"info.txt\",\"\"),(0,i.default)(e,\"showLoading\",!1),e)),my.showToast({type:\"success\",content:\"\\u5220\\u9664\\u6210\\u529f\",duration:2e3})):(n.setData((a={deleteHole:!1},(0,i.default)(a,\"info.txt\",\"\"),(0,i.default)(a,\"showLoading\",!1),a)),my.showToast({type:\"error\",content:t.msg,duration:2e3}));getCurrentPages()[getCurrentPages().length-1].onLoad()})}else my.showToast({content:\"\\u8f93\\u5165\\u53e3\\u4ee4\",duration:2e3})},deleteHoleClose:function(){this.setData({deleteHole:!1,deleteItem:{}})},deleteH:function(t){var e=t.currentTarget.dataset.item;e.userId=this.data.userId,e.types=this.data.activeTab,t.currentTarget.dataset.pid&&(e.pid=t.currentTarget.dataset.pid),this.setData({deleteHole:!0,holeDType:t.currentTarget.dataset.type,deleteItem:e})}})},function(t,e,a){t.exports={default:a(33),__esModule:!0}},function(t,e,a){a(34);var n=a(4).Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},function(t,e,a){var n=a(8);n(n.S+n.F*!a(1),\"Object\",{defineProperty:a(9).f})},function(t,e,a){var o=a(36);t.exports=function(n,i,t){if(o(n),void 0===i)return n;switch(t){case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,a){return n.call(i,t,e,a)}}return function(){return n.apply(i,arguments)}}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,a){var n=a(9),i=a(42);t.exports=a(1)?function(t,e,a){return n.f(t,e,i(1,a))}:function(t,e,a){return t[e]=a,t}},function(t,e,a){var n=a(6);t.exports=function(t){if(!n(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,a){t.exports=!a(1)&&!a(7)(function(){return 7!=Object.defineProperty(a(40)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,a){var n=a(6),i=a(5).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,a){var i=a(6);t.exports=function(t,e){if(!i(t))return t;var a,n;if(e&&\"function\"==typeof(a=t.toString)&&!i(n=a.call(t)))return n;if(\"function\"==typeof(a=t.valueOf)&&!i(n=a.call(t)))return n;if(!e&&\"function\"==typeof(a=t.toString)&&!i(n=a.call(t)))return n;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,a){\"use strict\";e.__esModule=!0;var n,i=a(44),o=(n=i)&&n.__esModule?n:{default:n};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}},function(t,e,a){t.exports={default:a(45),__esModule:!0}},function(t,e,a){a(46),t.exports=a(4).Object.assign},function(t,e,a){var n=a(8);n(n.S+n.F,\"Object\",{assign:a(47)})},function(t,e,a){\"use strict\";var f=a(1),p=a(48),m=a(59),h=a(60),g=a(61),v=a(12),i=Object.assign;t.exports=!i||a(7)(function(){var t={},e={},a=Symbol(),n=\"abcdefghijklmnopqrst\";return t[a]=7,n.split(\"\").forEach(function(t){e[t]=t}),7!=i({},t)[a]||Object.keys(i({},e)).join(\"\")!=n})?function(t,e){for(var a=g(t),n=arguments.length,i=1,o=m.f,r=h.f;n>i;)for(var s,u=v(arguments[i++]),l=o?p(u).concat(o(u)):p(u),c=l.length,d=0;c>d;)s=l[d++],f&&!r.call(u,s)||(a[s]=u[s]);return a}:i},function(t,e,a){var n=a(49),i=a(58);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,a){var r=a(10),s=a(11),u=a(51)(!1),l=a(54)(\"IE_PROTO\");t.exports=function(t,e){var a,n=s(t),i=0,o=[];for(a in n)a!=l&&r(n,a)&&o.push(a);for(;e.length>i;)r(n,a=e[i++])&&(~u(o,a)||o.push(a));return o}},function(t,e){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},function(t,e,a){var u=a(11),l=a(52),c=a(53);t.exports=function(s){return function(t,e,a){var n,i=u(t),o=l(i.length),r=c(a,o);if(s&&e!=e){for(;o>r;)if((n=i[r++])!=n)return!0}else for(;o>r;r++)if((s||r in i)&&i[r]===e)return s||r||0;return!s&&-1}}},function(t,e,a){var n=a(14),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,a){var n=a(14),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,a){var n=a(55)(\"keys\"),i=a(57);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,a){var n=a(4),i=a(5),o=\"__core-js_shared__\",r=i[o]||(i[o]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:n.version,mode:a(56)?\"pure\":\"global\",copyright:\"\\xa9 2019 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=!0},function(t,e){var a=0,n=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++a+n).toString(36))}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,a){var n=a(13);t.exports=function(t){return Object(n(t))}},function(t,e,a){\"use strict\";t.exports={fromDate:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1;n=n<10?\"0\"+n:n;var i=e.getDate();i=i<10?\"0\"+i:i;var o=e.getHours();o=o<10?\"0\"+o:o;var r=e.getMinutes(),s=e.getSeconds();return s=s<10?\"0\"+s:s,a+\"-\"+n+\"-\"+i+\" \"+o+\":\"+(r=r<10?\"0\"+r:r)}}},function(t,e,a){\"use strict\";var n,f=o(a(3)),i=o(a(2));function o(t){return t&&t.__esModule?t:{default:t}}$global.currentPageConfig={pagePath:\"pages/diary/diary\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\",\"input-item\":\"/node_modules/mini-antui/es/input-item/index\",\"picker-item\":\"/node_modules/mini-antui/es/picker-item/index\",notice:\"/node_modules/mini-antui/es/notice/index\"}};var r=a(15);Page((n={data:{title:\"\",maxFont:200,objectArray:[{id:0,name:\"\\u975e\\u5e38\\u597d\"},{id:1,name:\"\\u4e00\\u822c\\u822c\"},{id:2,name:\"\\u4e0d\\u5f00\\u5fc3\"},{id:3,name:\"\\u5f88\\u6124\\u6012\"}],memoList:[{type:0,name:\"\\u672a\\u5b8c\\u6210\"},{type:1,name:\"\\u5df2\\u5b8c\\u6210\"}],index:0,info:{pid:\"\",title:\"\",content:\"\",date:\"\",time:\"\",userId:\"\",_id:\"\",types:0,moodStatus:0,state:0,timer:0,tmpPic:[],tmpPic2:[],nickName:\"\",avatar:\"\",email:\"\",isOpen:!1}},onLoad:function(t){var a=this;if(t&&t.idx&&this.setData((0,f.default)({},\"info.types\",t.idx)),t.data){var e,n=JSON.parse(t.data),i=void 0;i=n.state?1:0,this.setData((e={info:n},(0,f.default)(e,\"info.types\",t.idx),(0,f.default)(e,\"info.state\",i),e))}else{var o,r=new Date,s=r.getFullYear(),u=r.getMonth()+1<10?\"0\"+(r.getMonth()+1):r.getMonth()+1,l=r.getDate()<10?\"0\"+r.getDate():r.getDate(),c=r.getHours()<10?\"0\"+r.getHours():r.getHours(),d=r.getMinutes()<10?\"0\"+r.getMinutes():r.getMinutes();this.setData((o={},(0,f.default)(o,\"info.date\",s+\"-\"+u+\"-\"+l),(0,f.default)(o,\"info.time\",c+\":\"+d),o))}my.getStorage({key:\"userInfo\",success:function(t){var e;a.setData((e={},(0,f.default)(e,\"info.userId\",t.data.userId),(0,f.default)(e,\"info.nickName\",t.data.nickName),(0,f.default)(e,\"info.avatar\",t.data.avatar),e))}}),my.getStorage({key:\"userEmail\",success:function(t){t.data&&a.setData((0,f.default)({},\"info.email\",t.data))}})},onClear:function(){},selectMood:function(){},moodChange:function(t){t.detail&&null!=t.detail.value&&this.setData((0,f.default)({},\"info.moodStatus\",t.detail.value))},stateChange:function(t){t.detail&&null!=t.detail.value&&this.setData((0,f.default)({},\"info.state\",t.detail.value))},selectDate:function(){var e=this;my.datePicker({format:\"yyyy-MM-dd\",startDate:\"2012-01-01\",endDate:\"2099-12-31\",success:function(t){e.setData((0,f.default)({},\"info.date\",t.date))}})},selectTime:function(){var e=this;my.datePicker({format:\"HH:mm\",success:function(t){e.setData((0,f.default)({},\"info.time\",t.date))}})},saveDiary:function(){var a=this;(0!=this.data.info.types||this.data.info.content)&&(1!=this.data.info.types||this.data.info.content)?2!=this.data.info.types||this.data.info.title?(this.setData((0,f.default)({},\"info.pid\",(new Date).getTime()+\"_dingdong_\"+this.data.info.userId)),(0,i.default)(\"saveDiary\",this.data.info,function(t){if(1==t.sta)if(0!=a.data.info.tmpPic.length)for(var e=0;e<a.data.info.tmpPic.length;e++)my.uploadFile({url:r.roots+\"upload\",filePath:a.data.info.tmpPic[e],fileType:\"image\",fileName:\"img\",formData:{pid:a.data.info.tmpPic2[e]},header:{\"Content-Type\":\"multipart/form-data\",accept:\"application/json\"},success:function(t){1==JSON.parse(t.data).sta?0==a.data.info.types?my.reLaunch({url:\"../index/index\"}):1==a.data.info.types||my.navigateTo({url:\"../schedule/schedule?activeTab=1\"}):my.showToast({type:\"fail\",content:\"\\u56fe\\u7247\\u4e0a\\u4f20\\u5931\\u8d25\",duration:2e3})}});else 0==a.data.info.types?my.reLaunch({url:\"../index/index\"}):1==a.data.info.types||my.reLaunch({url:\"../schedule/schedule\"});else my.showToast({type:\"fail\",content:\"\\u4fdd\\u5b58\\u5931\\u8d25\",duration:2e3})})):my.showToast({content:\"\\u6807\\u9898\\u4e0d\\u53ef\\u4e3a\\u7a7a\",duration:2e3}):my.showToast({content:\"\\u5185\\u5bb9\\u4e0d\\u53ef\\u4e3a\\u7a7a\",duration:2e3})},saveHole:function(){var a=this;this.data.info.content?(0,i.default)(\"saveHole\",this.data.info,function(t){if(1==t.sta)if(0!=a.data.info.tmpPic.length)for(var e=0;e<a.data.info.tmpPic.length;e++)my.uploadFile({url:r.roots+\"upload\",filePath:a.data.info.tmpPic[e],fileType:\"image\",fileName:\"img\",formData:{pid:a.data.info.tmpPic2[e]},header:{\"Content-Type\":\"multipart/form-data\",accept:\"application/json\"},success:function(t){1==JSON.parse(t.data).sta?my.navigateTo({url:\"../index/index?activeTab=1\"}):my.showToast({type:\"fail\",content:\"\\u56fe\\u7247\\u4e0a\\u4f20\\u5931\\u8d25\",duration:2e3})},fail:function(t){}});else my.navigateTo({url:\"../index/index?activeTab=1\"})}):my.showToast({content:\"\\u5185\\u5bb9\\u4e0d\\u53ef\\u4e3a\\u7a7a\",duration:2e3})},onInputTitle:function(t){this.setData((0,f.default)({},\"info.title\",t.detail.value))},onInputContent:function(t){this.setData((0,f.default)({},\"info.content\",t.detail.value))}},(0,f.default)(n,\"onClear\",function(t){this.setData((0,f.default)({},\"info.title\",\"\"))}),(0,f.default)(n,\"uploadPic\",function(t){var n=this;my.chooseImage({count:3,sizeType:[\"compressed\"],success:function(t){var e,a=[];t.apFilePaths.forEach(function(t){var e=Math.floor(8999*Math.random())+1e3;a.push(r.roots+\"tmp/\"+(new Date).getTime()+\"_\"+e+\".jpg\")}),n.setData((e={},(0,f.default)(e,\"info.tmpPic\",t.apFilePaths),(0,f.default)(e,\"info.tmpPic2\",a),e))}})}),(0,f.default)(n,\"checkOpen\",function(){this.setData((0,f.default)({},\"info.isOpen\",!this.data.info.isOpen))}),n))},function(t,e,a){\"use strict\";var n=o(a(3)),i=o(a(2));function o(t){return t&&t.__esModule?t:{default:t}}$global.currentPageConfig={pagePath:\"pages/mine/mine\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\",modal:\"/node_modules/mini-antui/es/modal/index\",\"picker-item\":\"/node_modules/mini-antui/es/picker-item/index\",\"input-item\":\"/node_modules/mini-antui/es/input-item/index\"},tabIndex:13},Page({data:{userId:\"\",imgUrl:\"\",nickName:\"\",selectVal:0,remind:!0,remindLen:3,opinion:\"\",showOpinion:!1,showLoading:!1,showSetEmail:!1,info:{email:\"\",email2:\"\"},objectArray:[{id:6,name:\"6\\u5c0f\\u65f6\"},{id:12,name:\"12\\u5c0f\\u65f6\"},{id:24,name:\"1\\u5929\"},{id:72,name:\"3\\u5929\"}]},onLoad:function(){var e=this;my.getStorage({key:\"userInfo\",success:function(t){e.setData({imgUrl:t.data.avatar,nickName:t.data.nickName,userId:t.data.userId}),my.getStorage({key:\"userEmail\",success:function(t){t.data?e.setData((0,n.default)({},\"info.email2\",t.data)):e.getEmail()}}),e.getSet()}})},dayChange:function(t){var e=void 0;t.detail&&null!=t.detail.value&&(this.setData({selectVal:t.detail.value}),e=this.data.objectArray[t.detail.value].id,this.setRemind(e,this.data.remind))},setRemind:function(t,e){var a={userId:this.data.userId,remindLen:t,remind:e};(0,i.default)(\"setSet\",a,function(t){t.sta})},onInputContent:function(t){this.setData({opinion:t.detail.value})},onModalClose:function(){this.setData({showOpinion:!1,opinion:\"\"})},onModalClick:function(){var e=this;this.setData({showLoading:!0});var t={userId:this.data.userId,email:this.data.info.email2,nickName:this.data.nickName,opinion:this.data.opinion};(0,i.default)(\"opinion\",t,function(t){e.setData({showLoading:!1}),my.showToast({content:t.msg,duration:2e3})}),this.setData({showOpinion:!1,opinion:\"\"})},showOpinionBox:function(){this.setData({showOpinion:!0})},switchChange:function(t){this.setData({remind:t.detail.value});var e=this.data.objectArray[this.data.selectVal].id;this.setRemind(e,t.detail.value)},getEmail:function(){var e=this;(0,i.default)(\"user/email\",{userId:this.data.userId},function(t){console.log(t),1==t.sta&&(my.setStorage({key:\"userEmail\",data:t.data}),e.setData((0,n.default)({},\"info.email2\",t.data)))})},getSet:function(){var a=this;(0,i.default)(\"getSet\",{userId:this.data.userId},function(t){if(1==t.sta){console.log(t);var e=0;e=6==t.data.remindLen?0:12==t.data.remindLen?1:24==t.data.remindLen?2:72==t.data.remindLen?3:0,a.setData({selectVal:e,remind:t.data.remind})}})},onClear:function(){this.setData((0,n.default)({},\"info.email\",\"\"))},onInputTitle:function(t){this.setData((0,n.default)({},\"info.email\",t.detail.value))},onModalEmailClick:function(){var e=this;if(!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/.test(this.data.info.email))return my.showToast({content:\"\\u90ae\\u7bb1\\u683c\\u5f0f\\u6709\\u8bef\\uff0c\\u8bf7\\u91cd\\u65b0\\u8f93\\u5165\",duration:2e3}),void this.onClear();this.setData((0,n.default)({},\"info.email2\",this.data.info.email)),my.setStorage({key:\"userEmail\",data:this.data.info.email2}),(0,i.default)(\"setEmail\",{userId:this.data.userId,email:this.data.info.email2},function(t){e.onModalEmailClose()})},onModalEmailClose:function(){this.setData((0,n.default)({showSetEmail:!1},\"info.email\",\"\"))},showEmailBox:function(){this.setData({showSetEmail:!0})}})},function(t,e,a){\"use strict\";var n,i=a(2),o=(n=i)&&n.__esModule?n:{default:n};$global.currentPageConfig={pagePath:\"pages/calendar/calendar\",usingComponents:{list:\"/node_modules/mini-antui/es/list/index\",\"list-item\":\"/node_modules/mini-antui/es/list/list-item/index\",\"picker-item\":\"/node_modules/mini-antui/es/picker-item/index\",modal:\"/node_modules/mini-antui/es/modal/index\"},tabIndex:12},Page({data:{toView:\"red\",scrollTop:100,monthList:[],nowMonth:0,selectMonth:0,nowDate:0,_year:0,_Mon:0,_Mon2:0,_Day:0,days:30,startDay:1,diaryArr:[],memoArr:[],timeArr:[],dataObj:{},nowMonthData:{},userId:\"\",style:[\"background:#95e5ff;color:#fff\",\"background:#feeb9c;color:#fff\",\"background:#d9e0ea;color:#fff\",\"background:#ff9cbd;color:#fff\"],showBox:!1,detailList:[],sta:[]},onLoad:function(){var e=this;this.initData2(),my.getStorage({key:\"userInfo\",success:function(t){t.data&&(e.setData({userId:t.data.userId}),e.getData(t.data.userId))}})},onPullDownRefresh:function(){this.initData2(this.data.selectMonth)},monthChange:function(t){t.detail&&null!=t.detail.value&&(this.setData({selectMonth:t.detail.value+1}),this.initData2(t.detail.value+1))},showDetail:function(t){t.target.dataset.item&&this.setData({detailList:t.target.dataset.item.arr,showBox:!0})},onModalClose:function(){this.setData({showBox:!1})},getData:function(t,e){var a=this,n=void 0;e?n=e:n=(new Date).getMonth()+1;var i={userId:t,startDate:this.data._year+\"-\"+n+\"-01\",endDate:this.data._year+\"-\"+n+\"-30\"};(0,o.default)(\"getMonData\",i,function(t){my.stopPullDownRefresh(),1==t.sta&&(a.setData({diaryArr:t.data.diary,memoArr:t.data.memo,timeArr:t.data.time}),a.initData(e))})},initData:function(t){var a=this,n={},i=[0,0,0,0];this.data.diaryArr.forEach(function(t){0==t.moodStatus?i[0]+=1:1==t.moodStatus?i[1]+=1:2==t.moodStatus?i[2]+=1:i[3]+=1;var e=parseInt(t.date.slice(-2));t.name=\"diary\",n[e]&&n[e].arr||(n[e]={},n[e].arr=[]),n[e].arr.push(t),n[e].style=a.data.style[t.moodStatus]});var o=0,r=0;i.forEach(function(t,e){t>o&&(o=t,r=e)}),this.data.memoArr.forEach(function(t){var e=parseInt(t.date.slice(-2));t.name=\"memo\",n[e]&&n[e].arr||(n[e]={},n[e].arr=[]),n[e].arr.push(t),n[e].dop=!0}),this.data.timeArr.forEach(function(t){var e=parseInt(t.date.slice(-2));t.name=\"time\",n[e]&&n[e].arr||(n[e]={},n[e].arr=[]),n[e].arr.push(t),n[e].dop=!0}),this.setData({dataObj:n,sta:r}),t||this.setData({nowMonthData:n,sta:r})},initData2:function(t){var e=new Date,a=t||e.getMonth()+1,n=e.getMonth()+1,i=0,o=e.getDate(),r=e.getFullYear(),s=new Date(e.getFullYear()+\"-\"+a+\"-01\");i=1==a||3==a||5==a||7==a||8==a||10==a||12==a?31:2==a?r%4==0?29:28:30;for(var u=[],l=1;l<=n;l++)u.push({id:l,name:l+\"\\u6708\"});this.setData({monthList:u,nowMonth:a,nowDate:o,_year:r,_Mon:a,_Mon2:n,_Day:o,days:i,startDay:s.getDay()}),t&&this.getData(this.data.userId,t)},upper:function(t){},lower:function(t){},scroll:function(t){},scrollToTop:function(t){this.setData({scrollTop:0})}})},function(t,e,a){\"use strict\";var n,i=r(a(3)),o=r(a(2));function r(t){return t&&t.__esModule?t:{default:t}}$global.currentPageConfig={pagePath:\"pages/schedule/schedule\",usingComponents:{tabs:\"/node_modules/mini-antui/es/tabs/index\",\"tab-content\":\"/node_modules/mini-antui/es/tabs/tab-content/index\",modal:\"/node_modules/mini-antui/es/modal/index\",\"am-checkbox\":\"/node_modules/mini-antui/es/am-checkbox/index\",\"count-down\":\"/components/count-down/index\"},tabIndex:11},Page((n={data:{userid:\"\",activeTab:0,memoArr:[],timeArr:[],isDelete:!1,deleteItem:{},showLoading:!1,tabs:[{title:\"\\u5907\\u5fd8\\u5f55\"},{title:\"\\u7eaa\\u5ff5\\u65e5\"}]},onLoad:function(t){var e=this;t&&t.activeTab&&this.setData({activeTab:t.activeTab}),my.getStorage({key:\"userInfo\",success:function(t){t.data&&(e.setData({userId:t.data.userId}),e.getDiary(t.data.userId))}})},onPullDownRefresh:function(){this.getDiary(this.data.userId)},handleTabClick:function(){},handleTabChange:function(){},handlePlusClick:function(){},modify:function(t){this.data.activeTab;my.navigateTo({url:\"../diary/diary?idx=1&data=\"+JSON.stringify(t.currentTarget.dataset.item)})},getDiary:function(t){var n=this;(0,o.default)(\"getDiary\",{userId:t},function(t){var e,a;(my.stopPullDownRefresh(),n.setData({memoArr:t.data.memo.reverse(),timeArr:t.data.time.reverse()}),0!=t.data.memoCount)?n.setData((e={},(0,i.default)(e,\"tabs[0].badgeType\",\"text\"),(0,i.default)(e,\"tabs[0].badgeText\",t.data.memoCount),e)):n.setData((a={},(0,i.default)(a,\"tabs[0].badgeType\",\"\"),(0,i.default)(a,\"tabs[0].badgeText\",\"\"),a));0!=t.data.timeCount?n.setData((0,i.default)({},\"tabs[1].badgeType\",\"dot\")):n.setData((0,i.default)({},\"tabs[1].badgeType\",\"\"))})}},(0,i.default)(n,\"handleTabClick\",function(t){var e=t.index;this.setData({activeTab:e})}),(0,i.default)(n,\"handleTabChange\",function(t){var e=t.index;this.setData({activeTab:e})}),(0,i.default)(n,\"deletes\",function(t){var e=t.currentTarget.dataset.item;e.userId=this.data.userId,0==this.data.activeTab?e.types=\"memo\":e.types=\"time\",this.setData({isDelete:!0,deleteItem:e})}),(0,i.default)(n,\"onModalClick\",function(){var e=this;this.data.timeArr.forEach(function(t){t._id==e.data.deleteItem._id&&(t.isClear=!0)}),this.setData({showLoading:!0,isDelete:!1,timeArr:this.data.timeArr}),(0,o.default)(\"deleteDiary\",this.data.deleteItem,function(t){1==t.sta?(e.setData({isDelete:!1,showLoading:!1}),my.showToast({type:\"success\",content:\"\\u5220\\u9664\\u6210\\u529f\",duration:2e3})):my.showToast({type:\"success\",content:\"\\u5220\\u9664\\u5931\\u8d25\",duration:2e3}),getCurrentPages()[getCurrentPages().length-1].onLoad()})}),(0,i.default)(n,\"onModalClose\",function(){this.setData({isDelete:!1})}),(0,i.default)(n,\"stateChange\",function(t){var n=this,e=t.target.dataset.item;e.state=t.detail.value,e.userId=this.data.userId,(0,o.default)(\"changeState\",e,function(t){1==t.sta&&(0,o.default)(\"getDiary\",{userId:n.data.userId},function(t){if(1==t.sta){var e,a;if(n.setData({diaryArr:t.data.diary.reverse(),memoArr:t.data.memo.reverse(),timeArr:t.data.time.reverse(),memoCount:t.data.memoCount,timeCount:t.data.memoCount,show:t.show}),0!=t.data.memoCount)n.setData((e={},(0,i.default)(e,\"tabs[0].badgeType\",\"text\"),(0,i.default)(e,\"tabs[0].badgeText\",t.data.memoCount),e));else n.setData((a={},(0,i.default)(a,\"tabs[0].badgeType\",\"\"),(0,i.default)(a,\"tabs[0].badgeText\",\"\"),a));0!=t.data.timeCount?n.setData((0,i.default)({},\"tabs[1].badgeType\",\"dot\")):n.setData((0,i.default)({},\"tabs[1].badgeType\",\"\"))}})})}),(0,i.default)(n,\"newDiary\",function(){var t=void 0;t=0==this.data.activeTab?1:2,my.navigateTo({url:\"../diary/diary?idx=\"+t})}),n))},function(t,e,a){\"use strict\";(\"undefined\"!==typeof global?global:self).appXAppJson={app:{$homepage:\"pages/test/test\"}}},function(t,e,a){\"use strict\";self.Map&&self.Set||importScripts(\"https://gw.alipayobjects.com/as/g/appx_release/deps/1.0.0/es6-set-map.js\"),importScripts(\"https://appx/af-appx.worker.min.js\"),AFAppX.registerApp&&AFAppX.registerApp({appJSON:appXAppJson})}]);","extractedComments":[]}